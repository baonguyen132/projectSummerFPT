services:
  api:
    build: ./flaskProject
    container_name: flask_api
    ports:
      - "5000:5000"
    volumes:
      - ./flaskProject:/app   # Mount code v√†o container ƒë·ªÉ hot reload
    environment:
      FLASK_APP: app.py      
      FLASK_ENV: development 
      PYTHONPATH: /app
      FLASK_DEBUG: "1"
    restart: unless-stopped
    depends_on:
      - mysql
    
  mysql:
    build: ./mysql
    container_name: mysql_db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root      # üëà B·∫Øt bu·ªôc c√≥
      MYSQL_DATABASE: kwave
      MYSQL_USER: appuser           # üëà (T√πy ch·ªçn) user ri√™ng cho app
      MYSQL_PASSWORD: apppass
    ports:
      - "3306:3306"
    volumes:
      - ./mysql_data:/var/lib/mysql